<h1><span>Order Table</span></h1>
<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
  <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
      <tr>
        <th scope="col" class="px-6 py-3">User ID</th>
        <th scope="col" class="px-6 py-3">Order ID</th>
        <th scope="col" class="px-6 py-3">Order Date</th>
        <th scope="col" class="px-6 py-3">Total Amount</th>
        <th scope="col" class="px-6 py-3">Status</th>
        <th scope="col" class="px-6 py-3">Shipping Address</th>
        <th scope="col" class="px-6 py-3">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700" *ngFor="let order of orderDataByUser">
        <td class="px-6 py-4">{{ order.user_id }}</td>
        <td class="px-6 py-4">{{ order.order_id }}</td>
        <td class="px-6 py-4">{{ order.order_date }}</td>
        <td class="px-6 py-4">{{ order.total_amount }}</td>
        <td class="px-6 py-4">{{ order.status }}</td>
        <td class="px-6 py-4">{{ order.shipping_address }}</td>
        <td class="px-6 py-4">
          <a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline" (click)="viewOrder(order)">View</a>
        </td>
      </tr>
      <tr *ngIf="orderDataByUser.length === 0">
        <td colspan="7" class="px-6 py-4 text-center">No orders found</td>
      </tr>
      <ng-container *ngFor="let order of orderDataByUser">
        <tr *ngIf="order.expanded">
          <td colspan="7" class="px-6 py-4">
            <table>
              <thead>
                <tr>
                  <th>Product ID</th>
                  <th>Quantity</th>
                  <th>Price</th>
                  <th>Amount</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of order.order_items">
                  <td>{{ item.product_id }}</td>
                  <td>{{ item.quantity }}</td>
                  <td>{{ item.price }}</td>
                  <td>{{ item.amount }}</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
